/**
 * --------------------------------------------------------------------------
<<<<<<< HEAD
 * Bootstrap (v5.2.3): util/component-functions.js
=======
 * Bootstrap util/component-functions.js
>>>>>>> 556a526 (Primer commit)
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
 * --------------------------------------------------------------------------
 */

<<<<<<< HEAD
import EventHandler from '../dom/event-handler'
import { getElementFromSelector, isDisabled } from './index'
=======
import EventHandler from '../dom/event-handler.js'
import SelectorEngine from '../dom/selector-engine.js'
import { isDisabled } from './index.js'
>>>>>>> 556a526 (Primer commit)

const enableDismissTrigger = (component, method = 'hide') => {
  const clickEvent = `click.dismiss${component.EVENT_KEY}`
  const name = component.NAME

  EventHandler.on(document, clickEvent, `[data-bs-dismiss="${name}"]`, function (event) {
    if (['A', 'AREA'].includes(this.tagName)) {
      event.preventDefault()
    }

    if (isDisabled(this)) {
      return
    }

<<<<<<< HEAD
    const target = getElementFromSelector(this) || this.closest(`.${name}`)
=======
    const target = SelectorEngine.getElementFromSelector(this) || this.closest(`.${name}`)
>>>>>>> 556a526 (Primer commit)
    const instance = component.getOrCreateInstance(target)

    // Method argument is left, for Alert and only, as it doesn't implement the 'hide' method
    instance[method]()
  })
}

export {
  enableDismissTrigger
}
